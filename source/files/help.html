<html>
	<head>
		<title>Deidentifier Help</title>
	</head>
	<body>
		<center><h1>Deidentifier Help</h1></center>
		Deidentifier is a general-purpose stand-alone deidentification utility.
		It imports images from external storage, deidentifies them, and stores
		them in a local file structure.

		<p>You can run the program on any computer that has Java 7 or better on it.
		
		<p>To run the program, either double-click the Deidentifier.jar file or
		launch a command window, navigate to the Deidentifier directory,
		and type: 
		<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<code>java -jar Deidentifier.jar</code>
		
		<p>If the program reports errors that are not obvious from the
		text shown in the Results pane, you may get additional information
		by running the program in a command window.

		<p>If an out-of-memory error occurs, you may assign more memory to
		the program by running it in a command window with the command:
		<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<code>java -Xmx768m -jar Deidentifier.jar</code>

		<p><b>The Directory Tab</b>
		
		<p>The Directory tab has a left and right pane. The left pane provides
		navigation through the files on the computer. The right pane displays
		the results of actions. At the bottom of the right pane, there are buttons
		to initiate the functions provided by the program.
		
		<p>The pulldown menu in the upper right of the Directory pane allows
		selection of the file system root that will be displayed in the
		directory tree.
		
		<p>The directory tree does not track changes in the directory structure
		that occur behind the program's back. You can refresh the directory tree
		by clicking the root of the tree or clicking the Refresh button in the header
		of the left pane.

		<p>The button in the lower right of the Directory pane displays a dialog
		that allows selection of the file extensions that are displayed
		in the directory tree. If the list of extensions includes an asterisk,
		all files are displayed. There is a special notation, "[dcm]", that
		selects files whose names contain only numerals and periods. This can
		be used, for example, to select images on DICOM CDs or files that were
		named by their SOPInstanceUIDs.
		
		<p>The <b>Import</b> button starts the import and deidentification
		process. Which files are processed depends on whether a file or a directory is selected
		in the Directory pane and on whether the <b>Include subdirectories</b> checkbox
		is selected:
		<ul>
		<li>If a single file is selected, that file is processed.</li>
		<li>If a directory is selected and the <b>Include subdirectories</b> checkbox is
		not selected, all the files in the selected directory are processed, but no
		files in subdirectories are processed.</li>
		<li>If a directory is selected and the <b>Include subdirectories</b> checkbox is
		selected, all the files in the selected directory and all its subdirectories
		are processed.</li>
		</ul>
		
		<p>Events that occur during the deidentification process are logged in the Results pane.
		
		<p>Images are stored in file structures for each date of processing. The file structures
		are stored in a parent directory. By default, the parent directory is called Submissions, and it
		is located in the directory containing the program. To change the parent directory, click the
		<b>Set Submissions Directory</b> button, navigate to the desired directory, and click <b>Save</b>. 
		The currently selected output directory is shown in the header of the right pane. Clicking that text
		repositions the directory tree in the left pane to point to the submisssions directory.
		
		<p><b>The Viewer Tab</b>

		<p>The Viewer tab displays the currently selected DICOM image. If the image file contains multiple frames,
		the <b>Next Frame</b> and <b>Previous Frame</b> buttons sequence through 
		the frames. Frame sequencing is also provided through the mouse wheel. 
		
		<p>Zoom, pan, and window width and level 
		functions are provided through icons in the upper right of the window. 
		
		<p>The window width and level can also
		be set manually by typing values into the provided text boxes. When entering text in the window width and level 
		boxes, the values do not take effect until the Enter key is pressed.
		
		<p>The <b>Save As JPEG</b> button saves the image, reduced to the width specified in a popup dialog.
		
		<p><b>The Elements Tab</b>
		
		<p>The Elements tab displays the element contents of the selected DICOM image.
		
		<p><b>The Script Tab</b>
		
		<p>The DICOM deidentification process is driven by a script file called "dicom-anonymizer.script" located in the directory
		containing the program. A default version is included in the installation.
		
		<p>The Script tab displays the DICOM anonymizer scripts. You can edit the scripts and click the <b>Save Changes</b> button.
		Changes are not effective until the scripts are saved. If you make a change and decide you made an error
		before saving, click the <b>Reset</b> button and the scripts will be refreshed from the last saved version.
		
		<p>The DICOM anonymizer script functions are documented in http://mircwiki.rsna.org/index.php?title=The_CTP_DICOM_Anonymizer.
		
		<p>Before beginning to import and process images, the first item in the script should be updated to reflect the site 
		identifier (SPOKENAME). Unless special deidentification rules are required by the project, no other parts of the script
		need be modified.

		<p><b>The Submission Tab</b>
		
		<p>The Submission tab provides an interface for creating metadata files summarizing the contents of a
		submission directory created during the import and deidentification process. The <b>Select Submission</b> button displays
		a file chooser allowing a submission directory to be selected. Selection of a directory displays a form that allows
		information to be entered on the patients, studies, series included in the submission. Clicking the <b>Save Metadata</b> saves
		the metadata in both CSV and XML files.

		<p><b>The Index Tab</b>
		
		<p>The Index tab provides an interface for searching the index of files that have been anonymized and stored in 
		the directory tree of submissions. The index is persistent, so it contains information on every patient processed
		by the program. To find the original PatientName and PatientID for a study subject, enter the anonymized PatientName 
		in the search field and type the Enter key or click the <b>Search</b> button. The search field is not case sensitive.
		
		<p>To list the entire index, click the <b>List</b> button. When in the List pane, the <b>Save</b> button saves the index 
		in a spreadsheet file.

		
		<center><h1>Credits</h1></center>
		<ul>
			<li>The Anonymizer program was developed under the aegis of the MIRC Committee of the Radiological Society of North America (RSNA).</li>
			<li>The CTP servlet container (CTP) was developed by the RSNA.</li>
			<li>The DICOM library (dcm4che) was developed by the incomparable Gunter Zeilinger.</li>
			<li>The CTP multipart library is a highly modified version of the COS library
			developed by Jason Hunter.</li>
			<li>The CTP database is based on the Apache JDBM module developed by Cees de Groot,
			Alex Boisvert, and associated contributors.
			<li>The Apachi POI library was developed by the Apache Softward Foundation.
		</ul>
		<h3>Licenses</h3>
		<ul>
			<li>The source software is released under the Apache License 2.0.
			(See https://www.apache.org/licenses/LICENSE-2.0)</li>
			<li>The DICOM library (dcm4che) is released under the GNU Lesser Public license.
			(See https://www.gnu.org/licenses/lgpl-3.0.en.html)</li>
			<li>The original multipart library (COS) is released under the servlets.com license.
			(http://www.servlets.com/cos/license.html)</li>
			<li>The Apache POI library is licensed under the Apache 2.0 License.
			(See https://www.apache.org/licenses/LICENSE-2.0)</li>
		</ul>
		<h3>Copyrights</h3>
		<ul>
			<li>CTP and MIRC are copyrighted 2001-2020 by the RSNA.</li>
			<li>JDBM is copyrighted 2000-2001 by Cees de Groot, Alex Boisvert, and associated contributors.</li>
		</ul>
	</body>
</html>